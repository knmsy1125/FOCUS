<div class="background">
  <div class="container">
    <div class="row">
      <div class="col centre">
        <div class="login-signup_box">
        <h1>設定</h1><br>

        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
          <%= render "users/shared/error_messages", resource: resource %>

          <div>
            <% if current_user.profile_image_id.nil? %>
              <%= image_tag 'no-image-icon.png', :size =>'200x200', :style =>"border-radius: 80%", id: "preview" %>
              <!--<img id="preview", src="assets/images/no-image-icon.png" style="width: 200px; border-radius: 80%; height: 200px;">-->
            <% else %>
              <img id="preview" style="width: 200px; border-radius: 80%; height: 200px;">
            <% end %>
          </div>
          <div class="col centre">
            <%= f.attachment_field :profile_image, class: "form-control-file user_image" %>
            </div><br>
          <div>
            氏名<br><%= f.text_field :name, autofocus: true, class: "name" %>
          </div><br>
          <div>
            メールアドレス<br><%= f.email_field :email, autofocus: true, autocomplete: "email" %>
          </div><br>

          <%= f.submit '編集内容を保存', class: "btn btn-success" %>
          <%= link_to  "退会する", users_unsubscribe_path, class: "btn btn-danger" %>
        <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
$('#user_profile_image').on('change', function(){
	var $fr = new FileReader();
	$fr.onload = function(){
		$('#preview').attr('src', $fr.result);
	}
	$fr.readAsDataURL(this.files[0]);
});
</script>
